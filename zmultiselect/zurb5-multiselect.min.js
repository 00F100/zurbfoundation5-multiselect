(function(c){c(document).mouseup(function(f){var d=c(".zselect ul");if(!d.is(f.target)&&d.has(f.target).length===0){d.hide()}else{}});c(document).on("click",".zselect",function(f){var d=c(f.target).prop("tagName");if(d!=="LI"&&d!=="INPUT"){c("li.filter input").val("").keyup();c("ul",this).toggle()}});c(window).on("keydown",function(d){d=d||window.event;if(d.keyCode===27){c("li.filter input").val("").keyup();c(".zselect ul").hide()}});c(document).on("click","li",function(d){if(c(d.target).prop("tagName")!=="INPUT"){c("input:checkbox",this).click()}});function b(){c.each(c(".zselect"),function(f,e){var d=c(e).outerWidth();c(e).find("ul").attr("style","width:"+d+"px!important;")})}c(window).resize(function(){b()});var a={init:function(f){var h,g;c.each(c(this),function(j,i){h=Math.random().toString(36).substr(2,9);c(i).hide().attr("rel",h);c(i).parent().append("<div id='"+h+"' class='zselect'><span class='head'></span><ul></ul></div>");c.each(i,function(k,l){g=(c(l).is("[data-selected]"))?"checked='checked'":"";c("#"+h+" ul").append("<li><input value='"+c(l).val()+"' type='checkbox' "+g+" />&nbsp;"+c(l).text()+"</li>");c("#"+h+" span").html((f.placeholder===undefined)?"&nbsp;":f.placeholder)})});if(f.filter===true){if(f.filterResult===undefined){f.filterResult=true}if(f.filterResultText===undefined){f.filterResultText="showed"}var e=(f.filterPlaceholder!==undefined)?f.filterPlaceholder:"Filter...";var d=this.attr("rel");c("div#"+d+" ul").prepend('<li class="filter"><input type="text" placeholder="'+e+'" /></li>');if(f.filterResult===true){c("div#"+d+" ul").append('<li class="filterResult"></li>')}c("div#"+d+" ul li.filter input").keyup(function(){var k=c(this).val();var i=0,j=c("div#"+d+" ul li input:checkbox").length;c("div#"+d+" ul li input:checkbox").filter(function(m,l){if(c(l).val().indexOf(k)===-1){c(l).parent().hide()}else{c(l).parent().show();i++}});if(f.filterResult===true){c("div#"+d+" ul li.filterResult").text(f.filterResultText+" "+i+"/"+j)}})}if(f.live!==undefined){var d=this.attr("rel");c(".zselect#"+d).on("change","input:checkbox",function(i){c(f.live).val(a.getValue(c("select[rel='"+d+"']")))})}b()},getValue:function(e){if(e===undefined){e=this}var f=new Array();var d=c(e).attr("rel");c.each(c("div#"+d+" ul li input"),function(h,g){if(c(g).val()!==undefined){if(c(g).prop("checked")){f.push(c(g).val())}}});return f},open:function(){c("div#"+c(this).attr("rel")+" ul").show()},close:function(){c("div#"+c(this).attr("rel")+" ul").hide()},set:function(e,d){c("div#"+c(this).attr("rel")+" ul li input:checkbox[value='"+e+"']").prop("checked",d).change()},checkall:function(){c("div#"+c(this).attr("rel")+" ul li input:checkbox").prop("checked",true).change()},uncheckall:function(){c("div#"+c(this).attr("rel")+" ul li input:checkbox").prop("checked",false).change()},destroy:function(d){c("div#"+c(this).attr("rel")+" ul li input:checkbox[value='"+d+"']").parent().remove()}};c.fn.zmultiselect=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{c.error("Method "+d+" does not exist on zmultiselect")}}}})(jQuery);